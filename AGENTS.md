# Repository Guidelines

## Project Structure & Module Organization
- Sources live under `Sources/` with modules: `App`, `UI`, `HandwritingKit`, `ScoringEngine`, `Recommender`, `Models`.
- Assets and templates go in `Resources/` (e.g., `Resources/Templates/`).
- Project is generated by XcodeGen using `project.yml`; Info plist at `Sources/Info.plist`.

Example layout:
```
Sources/{App,UI,HandwritingKit,ScoringEngine,Recommender,Models}
Resources/Templates
project.yml
```

## Build, Test, and Development Commands
- Generate Xcode project:
  `xcodegen generate`
- Lint (runs post‑build if installed):
  `swiftlint` (or will echo if missing)
- Build/Run (Xcode): open the generated `.xcodeproj`, select an iOS Simulator (iPad recommended), then Run.
- CLI build/test (optional):
  `xcodebuild -scheme Caligraphy -destination 'platform=iOS Simulator,name=iPhone 15' build`
  `xcodebuild -scheme Caligraphy -destination 'platform=iOS Simulator,name=iPhone 15' test`

## Coding Style & Naming Conventions
- Swift 5.9, iOS 17 target. Prefer SwiftUI idioms and PencilKit for input.
- Follow Swift API Design Guidelines; 4‑space indentation; camelCase for variables/functions, PascalCase for types.
- Keep files small and module‑scoped; place views in `UI/`, algorithms in `ScoringEngine/`, platform bridges in `HandwritingKit/`.
- Run `swiftlint` locally before PRs.

## Testing Guidelines
- Use XCTest. Place tests under `Tests/<ModuleName>Tests/` with filenames ending in `Tests.swift`.
- Name tests using Given_When_Then style. Aim for coverage of metrics utilities (e.g., DTW/Fréchet helpers) and view‑model logic.
- Run via Xcode’s Test action or `xcodebuild … test` as above.

## Commit & Pull Request Guidelines
- Commits: imperative mood, scoped when helpful (e.g., `UI:`/`ScoringEngine:`). Example: `ScoringEngine: fix jerk calculation edge case`.
- PRs: include a clear description, before/after notes, linked issues, and screenshots for UI changes.
- Checklist: `xcodegen generate` up‑to‑date, builds on simulator, `swiftlint` clean, no large assets in git.

## Security & Configuration Tips
- Set `DEVELOPMENT_TEAM` in `project.yml` for code signing.
- Avoid embedding sensitive keys. Store local config in user schemes or environment, never in source.
- Validate third‑party additions with maintainers before introducing dependencies.

